# HTMLメール生成ツール

## 概要

**目的**: テキストをHTMLメールに自動変換して送信
**ユーザー**: 営業・広報・CS（非エンジニア）
**フロー**: テキスト入力 → SONNET API → プレビュー → 送信（1通）

---

## 機能一覧

| 機能 | 対応 | 備考 |
|------|:----:|------|
| メールアドレス・件名入力 | MVP | バリデーション、デフォルト値あり |
| 本文テキスト入力 | MVP | 改行・箇条書き対応 |
| ブランド設定（色・フォント） | MVP | 任意、未指定時はデフォルト |
| SONNET APIでHTML変換 | MVP | インラインCSSのみ、失敗時は簡易テンプレート |
| プレビュー（PC/Mobile） | MVP | 表示切替機能 |
| SMTP送信（1通） | MVP | 結果表示（成功/失敗） |
| テンプレート保存 | 将来 | Phase 3 |
| 送信履歴 | 将来 | Phase 3 |
| 名簿管理・一括送信 | 将来 | Phase 3 |

---

## UI設計

```
┌─────────────────────────────────────┐
│ 宛先: [                  ]          │
│ 件名: [                  ]          │
├─────────────────────────────────────┤
│ ブランド設定（任意）                │
│ [プライマリ色] [アクセント色] [フォント] │
├─────────────────────────────────────┤
│ 本文:                               │
│ ┌─────────────────────────────────┐ │
│ │                                 │ │
│ │  (テキスト入力エリア)           │ │
│ │                                 │ │
│ └─────────────────────────────────┘ │
│                                     │
│ [CSS強化してプレビュー] [▼SONNET]  │
├─────────────────────────────────────┤
│ プレビュー      [PC表示] [Mobile]   │
│ ┌─────────────────────────────────┐ │
│ │                                 │ │
│ │  (生成されたHTML)               │ │
│ │                                 │ │
│ └─────────────────────────────────┘ │
│                                     │
│ [メール送信]                        │
│ 結果: _____________________________ │
└─────────────────────────────────────┘
```

---

## API仕様

### リクエスト例
```json
{
  "text": "お世話になっております。\n\n新商品のご案内です。",
  "primaryColor": "#4A90E2",
  "accentColor": "#F5A623",
  "font": "sans-serif"
}
```

### レスポンス要件
- **形式**: HTMLのみ（説明文なし）
- **幅**: 600px、中央寄せ
- **CSS**: インラインのみ（外部ファイル不可）
- **禁止**: `<script>`, `<form>`, `<video>`, `<iframe>`
- **推奨**: `<h1-h3>`, `<p>`, `<ul>`, `<a>`（CTAボタン）

### フォールバック
API失敗時は以下を自動生成：
```html
<div style="max-width:600px;margin:0 auto;padding:40px;background:#fff;font-family:sans-serif;">
  <p style="line-height:1.6;color:#333;">[元のテキスト]</p>
</div>
```

---

## 技術構成

```
Frontend:  Next.js + React
Backend:   Node.js (API Routes)
AI:        Claude Sonnet API
Mail:      Nodemailer + SMTP
Deploy:    Vercel
```

---

## 開発計画

### Phase 1: MVP（2週間）
- [ ] 入力フォーム作成
- [ ] SONNET API連携
- [ ] プレビュー機能
- [ ] SMTP送信機能
- [ ] エラーハンドリング

### Phase 2: UX改善（1週間）
- [ ] ブランド設定UI
- [ ] PC/Mobile切替
- [ ] ローディング表示
- [ ] 入力検証強化

### Phase 3: 拡張（未定）
- [ ] テンプレート保存
- [ ] 送信履歴
- [ ] 一括送信機能

---

## 備考

- 1画面で全操作完結
- ログは最小限（コンソール or 簡易ログ）
- SMTP設定は環境変数で管理
- セキュリティ: APIキーは環境変数、メールは送信数制限
